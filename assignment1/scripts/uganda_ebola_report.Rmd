---
title: "Uganda Ebola Outbreak Report"
author: "James Azam & Marijn Hazelbag"
date: "13/01/2020"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(dplyr)
library(ggplot2)
library(incidence)
```
```{r echo=FALSE, message=FALSE}
ebola_dat <- read_csv(file = '../data/ebola_1.csv') %>% 
    arrange(reportDate)
```
```{r echo=FALSE, message=FALSE}
## calculations for report
first_reporting_date <- pull(ebola_dat, reportDate)[1]
last_reporting_date <- pull(ebola_dat, reportDate)[nrow(ebola_dat)]
cases_per_hh <- ebola_dat %>% count(householdID) ## stratify by the unique households and count the number of cases per household
n_households <- length(unique(ebola_dat$householdID))
total_cases <- sum(cases_per_hh$n)
total_confirmed <- as.numeric(table(ebola_dat$status)['confirmed'])
total_probable <- as.numeric(table(ebola_dat$status)['probable'])
total_suspected <- as.numeric(table(ebola_dat$status)['suspected'])
max_cases <- max(cases_per_hh$n) ## maximum number of cases in the households
n_hh_max_cases <- length(which(max(cases_per_hh$n) == cases_per_hh$n)) ## how many households have the maximum number of cases?
mean_cases_per_hh <- mean(table(ebola_dat$householdID))

deaths_per_hhh <- ebola_dat %>% group_by(householdID) %>% tidyr::drop_na() %>% count()
mean_deaths <-  mean(deaths_per_hhh$n)
max_deaths <- max((deaths_per_hhh$n))
n_max_hh_deaths <- length(max((deaths_per_hhh$n)))

## create the incidence object from the data
ebola_inc <- incidence(ebola_dat$onsetDate, groups = ebola_dat$status)
```
## The ongoing Ebola outbreak in Uganda, 2019/2020
The first Ebola virus disease (EVD) case was reported `r ebola_inc$timespan` days ago on `r first_reporting_date`. 

As of `r last_reporting_date`, there have been `r total_cases` reported cases in `r n_households` unique households. Out of the total cases, `r total_confirmed` are confirmed, `r total_probable` probable, and `r total_suspected` suspected. The average number of cases per EVD infected household is `r mean_cases_per_hh`, and `r n_hh_max_cases` households have reported up to `r max_cases` cases each. 

Household level mortality is high. The mean number of deaths is `r mean_deaths`.  For `r n_max_hh_deaths` `r ifelse(n_max_hh_deaths == 1, 'household', 'households')` we observed the maximum number of `r max_deaths` deaths. 

The incidence curve below summarises the reported information.

```{r echo=FALSE, message=FALSE}
plot(ebola_inc, xlab = 'Date of onset')
```

## Additional data required
Like many other infectious diseases, Ebola virus disease (EVD) is spread by direct contact and over a spatial landscape. Hence, it will be useful for us to have GIS locations of households to ascertain social interactions and transmission chains. We will require demographic information(gender, age) for estimating metrics like the age-specific case-fatality ratios. These metrics are useful for recommending targetted interventions concerning age and sex, and to infer possible interactions. Additionally, we require information on hospitalisation (i.e. the date of hospitalisation, hospital name, and location).


